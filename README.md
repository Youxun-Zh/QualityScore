#事件驱动架构下的服务质量评估模型
##背景
一个对服务整体质量评估的模型及实践。
##相关名词
    事件（Event）：状态变化的记录。  
    技术指标：用于跟踪和评估基础资源目标的可量化指标。  
    业务指标：用于跟踪和评估特定业务目标的可量化指标。  
    代码：软件开发产生的源代码文件。  
    资源：软件运行所需的软件资源及硬件资源，包括 CPU、Memory、DB 等。  
    运行时（Runtime）：程序运行的时候，体现服务的运行状态。  
##现状
    目前线上运行的有 CI 系统、代码存储在 GitLab 仓库、数据库有自建 MySQL、队列有 MQ。  
    服务运行的系统有 CD 及 K8s 系统。  
    服务在运行时会产生相关的 Metric 及 Log。  
##方案
###为什么需要一个可靠的服务质量评估模型？  
    1.形成事件驱动（服务质量的下降也是一个事件），用服务质量下降产生的事件驱动服务本身质量的稳步提升及稳定。
    2.而从代码、资源、运行时的各个维度下的子项的质量下降也可以同样触发整件驱动，驱动后续的故障自愈、容灾等动作，进而实现服务本身质量的稳定。
###软件开发过程中产生代码及周边资源（包括 DB、MQ、服务器等），服务上线产生运行时，这三项是服务运行的基石，三者构成了 服务本身，又相互影响。  
    1.Code
    2.Runtime
    3.Source
###所以可以从代码、资源及运行时三方面来构建服务质量评估模型，来评估一个服务质量的好坏。同时产生一个全局视角的评估分值来直观的描述该服务质量的好坏。
    1.质量分值的目的是随着时间纬度逐步提高服务本身的质量。
###服务质量评估的大类确定好后，可以基于基础能力的建设来丰富相应的服务质量计算维度即可。
####代码维度
    1.代码复杂度
    2.代码规范程度
    3.代码的单测覆盖率等
    4.资源维度
    5. DB
    6. MQ 
    7.Memeory
    8.CPU 等
####运行时维度
    1.Log、Metric、Alarming
    2.实时的异常捕捉
    3.服务的拓朴等
####质量分计算公式
    QS = ∑ weight(i) * score
####同时代码、资源及运行时三者的权重可以随着时间的自然演进而逐步发生变化。
    1.如项目初建时，质量关注的重点是代码，可以将代码的权重相应的提升
    2.对于对资源倚重的项目，如计算型服务，队列分发型服务，可以将资源的权重相应的提升。
    3.对于代码逻辑简单，但又是高 QPS 型的服务，可以将运行时的权重相应的做下提升。
    4.三者权重可以视当前所需进行相应的调整，这样有利于更好的评价及把控一个服务的质量。
    5.三个衡量维度可以独立维护及管理，又可以分别推进各自维度相关的优化事项同。
##对于重要的业务指标是否需要加入服务质量评价的计算公式，可以视情况而定，如果该业务指标的波动会对整体的质量影响较大，同时在下层又没有相应的技术指标能反馈出来，可以将该业务指标加入到计算公式，计算时赋于相应的权重值就好。
    1.服务的质量与项目及各小组间的关联关系
